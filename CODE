import requests
import socket

def get_public_ip():
    try:
        response = requests.get('https://api.ipify.org')
        if response.status_code == 200:
            return response.text
        else:
            return None
    except Exception as e:
        print(f"An error occurred: {e}")
        return None

def get_dns_servers():
    dns_servers = []
    with open('/etc/resolv.conf', 'r') as resolv_file:
        for line in resolv_file:
            if line.startswith('nameserver'):
                dns_servers.append(line.split()[1])
    return dns_servers

# Before connecting to VPN
ip_before_vpn = get_public_ip()
dns_before_vpn = get_dns_servers()
print(f"IP before connecting to VPN: {ip_before_vpn}")
print(f"DNS servers before connecting to VPN: {dns_before_vpn}")

# After connecting to VPN
ip_after_vpn = get_public_ip()
dns_after_vpn = get_dns_servers()
print(f"IP after connecting to VPN: {ip_after_vpn}")
print(f"DNS servers after connecting to VPN: {dns_after_vpn}")

if ip_before_vpn == ip_after_vpn:
    print("Your VPN might be leaking your IP.")
else:
    print("Your VPN is not leaking your IP.")

if dns_before_vpn == dns_after_vpn:
    print("Your VPN might be leaking your DNS.")
else:
    print("Your VPN is not leaking your DNS.")
